<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>bibstuff.bibfile</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar"
        href="bibstuff-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar"
        href="trees.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar"
        href="indices.html">Index</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar"
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center">
            <p class="nomargin">
              BibStuff
      </p></th></tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="bibstuff-module.html">Package&nbsp;bibstuff</a> ::
        Module&nbsp;bibfile
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript: void(0);" class="privatelink"
    onclick="toggle_private();">hide private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="bibstuff.bibfile-pysrc.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<h2 class="py-src">Source Code for <a href="bibstuff.bibfile-module.html">Module bibstuff.bibfile</a></h2>
<div class="py-src">
<pre class="py-src">
<span class="lineno">  1</span>  <span class="py-line"><span class="py-comment">#!usr/bin/python</span> </span>
<span class="lineno">  2</span>  <span class="py-line"><span class="py-comment"></span><span class="py-comment">#File: bibfile.py</span> </span>
<span class="lineno">  3</span>  <span class="py-line"><span class="py-comment"></span><span class="py-docstring">'''</span> </span>
<span class="lineno">  4</span>  <span class="py-line"><span class="py-docstring">Provides two classes, BibFile and BibEntry for</span> </span>
<span class="lineno">  5</span>  <span class="py-line"><span class="py-docstring">accessing the parts of a bibtex database.</span> </span>
<span class="lineno">  6</span>  <span class="py-line"><span class="py-docstring">BibFile inherits from ``simpleparse.dispatchprocessor``.</span> </span>
<span class="lineno">  7</span>  <span class="py-line"><span class="py-docstring">To fill a BibFile instance, i, call bibgrammar.Parse(src, i).</span> </span>
<span class="lineno">  8</span>  <span class="py-line"><span class="py-docstring"></span> </span>
<span class="lineno">  9</span>  <span class="py-line"><span class="py-docstring">This framework could still be made more general along the lines of BtParse.</span> </span>
<span class="lineno"> 10</span>  <span class="py-line"><span class="py-docstring"></span> </span>
<span class="lineno"> 11</span>  <span class="py-line"><span class="py-docstring">:author: Dylan Schwilk</span> </span>
<span class="lineno"> 12</span>  <span class="py-line"><span class="py-docstring">:contact: try@schwilk.org</span> </span>
<span class="lineno"> 13</span>  <span class="py-line"><span class="py-docstring">:author: Alan G Isaac</span> </span>
<span class="lineno"> 14</span>  <span class="py-line"><span class="py-docstring">:contact: http://www.american.edu/cas/econ/faculty/isaac/isaac1.htm</span> </span>
<span class="lineno"> 15</span>  <span class="py-line"><span class="py-docstring">:copyright: 2006 by Dylan Schwilk and Alan G Isaac</span> </span>
<span class="lineno"> 16</span>  <span class="py-line"><span class="py-docstring">:license: MIT (see ./license.txt)</span> </span>
<span class="lineno"> 17</span>  <span class="py-line"><span class="py-docstring">:license: MIT (see `license.txt`_)</span> </span>
<span class="lineno"> 18</span>  <span class="py-line"><span class="py-docstring">:date: 2006-08-01</span> </span>
<span class="lineno"> 19</span>  <span class="py-line"><span class="py-docstring"></span> </span>
<span class="lineno"> 20</span>  <span class="py-line"><span class="py-docstring">.. _license.txt: ./license.txt</span> </span>
<span class="lineno"> 21</span>  <span class="py-line"><span class="py-docstring">'''</span> </span>
<span class="lineno"> 22</span>  <span class="py-line"><span class="py-name">__docformat__</span> <span class="py-op">=</span> <span class="py-string">"restructuredtext en"</span> </span>
<span class="lineno"> 23</span>  <span class="py-line"><a class="py-name" href="bibstuff.bibfile-module.html#__author__">__author__</a>  <span class="py-op">=</span>    <span class="py-string">'''Dylan Schwilk (www.pricklysoft.org) and Alan G. Isaac'''</span> </span>
<span class="lineno"> 24</span>  <span class="py-line"><a class="py-name" href="bibstuff.bibfile-module.html#__version__">__version__</a> <span class="py-op">=</span>    <span class="py-string">'0.5.5'</span> </span>
<span class="lineno"> 25</span>  <span class="py-line"><a class="py-name" href="bibstuff.bibfile-module.html#__strict__">__strict__</a> <span class="py-op">=</span> <span class="py-name">False</span>    <span class="py-comment"># should we be strict with bibtex format?</span> </span>
<span class="lineno"> 26</span>  <span class="py-line"><a class="py-name" href="bibstuff.bibfile-module.html#__needs__">__needs__</a> <span class="py-op">=</span> <span class="py-string">'2.4'</span> </span>
<span class="lineno"> 27</span>  <span class="py-line"> </span>
<span class="lineno"> 28</span>  <span class="py-line"> </span>
<span class="lineno"> 29</span>  <span class="py-line"><span class="py-comment">####################### IMPORTS #####################################</span> </span>
<span class="lineno"> 30</span>  <span class="py-line"><span class="py-comment"></span><span class="py-comment"># import from standard library</span> </span>
<span class="lineno"> 31</span>  <span class="py-line"><span class="py-comment"></span><span class="py-keyword">import</span> <span class="py-name">re</span> </span>
<span class="lineno"> 32</span>  <span class="py-line"> </span>
<span class="lineno"> 33</span>  <span class="py-line"><span class="py-comment"># import dependencies</span> </span>
<span class="lineno"> 34</span>  <span class="py-line"><span class="py-comment"></span><span class="py-keyword">from</span> <span class="py-name">simpleparse</span><span class="py-op">.</span><span class="py-name">dispatchprocessor</span> <span class="py-keyword">import</span> <span class="py-name">dispatch</span><span class="py-op">,</span> <span class="py-name">DispatchProcessor</span><span class="py-op">,</span> <span class="py-name">getString</span> </span>
<span class="lineno"> 35</span>  <span class="py-line"><span class="py-comment">#TODO: can we can rid of mx, since included now with simpleparse?</span> </span>
<span class="lineno"> 36</span>  <span class="py-line"><span class="py-comment"></span><span class="py-keyword">import</span> <span class="py-name">mx</span><span class="py-op">.</span><span class="py-name">TextTools</span> </span>
<span class="lineno"> 37</span>  <span class="py-line"><span class="py-comment">#from seqdict import seqdict     #ai: only needed for the old BibEntry class, which is here superceded by BibEntry</span> </span>
<span class="lineno"> 38</span>  <span class="py-line"><span class="py-comment"></span> </span>
<span class="lineno"> 39</span>  <span class="py-line"><span class="py-comment">#bibstuff imports</span> </span>
<span class="lineno"> 40</span>  <span class="py-line"><span class="py-comment"></span><span class="py-keyword">import</span> <a class="py-name" href="bibstuff.bibgrammar-module.html">bibgrammar</a> </span>
<span class="lineno"> 41</span>  <span class="py-line"><span class="py-keyword">import</span> <a class="py-name" href="bibstuff.bibname-module.html">bibname</a> <span class="py-comment">#ai: shd move all bibname into here? possibly</span> </span>
<span class="lineno"> 42</span>  <span class="py-line"><span class="py-keyword">import</span> <a class="py-name" href="bibstuff.bibstyles-module.html">bibstyles</a> </span>
<span class="lineno"> 43</span>  <span class="py-line"><span class="py-keyword">from</span> <a class="py-name" href="bibstuff.bibstyles-module.html">bibstyles</a><span class="py-op">.</span><a title="bibstuff.bibstyles.shared" class="py-name" href="bibstuff.bibstyles.shared-module.html">shared</a> <span class="py-keyword">import</span> <a class="py-name" href="bibstuff.bibstyles.shared-module.html#reformat_para">reformat_para</a> </span>
<span class="lineno"> 44</span>  <span class="py-line"><span class="py-keyword">import</span> <span class="py-name">logging</span> </span>
<span class="lineno"> 45</span>  <span class="py-line"><a class="py-name" href="bibstuff.bibfile-module.html#bibfile_logger">bibfile_logger</a> <span class="py-op">=</span> <span class="py-name">logging</span><span class="py-op">.</span><span class="py-name">getLogger</span><span class="py-op">(</span><span class="py-string">'bibstuff_logger'</span><span class="py-op">)</span> </span>
<span class="lineno"> 46</span>  <span class="py-line"><span class="py-comment">#####################################################################</span> </span>
<span class="lineno"> 47</span>  <span class="py-line"><span class="py-comment"></span> </span>
<span class="lineno"> 48</span>  <span class="py-line"> </span>
<a name="BibEntry"></a><div id="BibEntry-def"><span class="lineno"> 49</span> <a class="pysrc-toggle" href="#" id="BibEntry-toggle" onclick="toggle('BibEntry'); return false;">-</a><span class="py-line"><span class="py-keyword">class</span> <a class="py-def-name" href="bibstuff.bibfile.BibEntry-class.html">BibEntry</a><span class="py-op">(</span><span class="py-base-class">dict</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibEntry-collapsed" style="display:none;" pad="+++" indent="++++"></div><div id="BibEntry-expanded"><span class="lineno"> 50</span>  <span class="py-line">        <span class="py-docstring">'''</span> </span>
<span class="lineno"> 51</span>  <span class="py-line"><span class="py-docstring">        The representation of a single bibliographic entry.</span> </span>
<span class="lineno"> 52</span>  <span class="py-line"><span class="py-docstring">        It replaces the original BibEntry.</span> </span>
<span class="lineno"> 53</span>  <span class="py-line"><span class="py-docstring">        Changes: subclasses dict, does not use seqdict.</span> </span>
<span class="lineno"> 54</span>  <span class="py-line"><span class="py-docstring">        Provides a dictionary interface to the fields:</span> </span>
<span class="lineno"> 55</span>  <span class="py-line"><span class="py-docstring">        field keys are case-insensitive and fields are stored</span> </span>
<span class="lineno"> 56</span>  <span class="py-line"><span class="py-docstring">        in the order added.</span> </span>
<span class="lineno"> 57</span>  <span class="py-line"><span class="py-docstring">        '''</span> </span>
<a name="BibEntry.__init__"></a><div id="BibEntry.__init__-def"><span class="lineno"> 58</span> <a class="pysrc-toggle" href="#" id="BibEntry.__init__-toggle" onclick="toggle('BibEntry.__init__'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibEntry-class.html#__init__">__init__</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span><span class="py-op">*</span><span class="py-param">args</span><span class="py-op">,</span><span class="py-op">**</span><span class="py-param">kwargs</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibEntry.__init__-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibEntry.__init__-expanded"><span class="lineno"> 59</span>  <span class="py-line">                <span class="py-name">dict</span><span class="py-op">.</span><span id="link-0" class="py-name"><a title="bibstuff.addrefs.CitationFormatter.__init__
bibstuff.bibfile.BibEntry.__init__
bibstuff.bibfile.BibFile.__init__
bibstuff.bibname.BibName.__init__
bibstuff.bibstyle.BibStyle.__init__
bibstuff.bibstyles.shared.CitationManager.__init__
bibstuff.bibstyles.shared.CiteRefProcessor.__init__
bibstuff.bibstyles.shared.NameFormatter.__init__
bibstuff.bibstyles.shared.NamesFormatter.__init__" class="py-name" href="#" onclick="doclink('link-0', '__init__', 'Method addrefs.CitationFormatter.__init__()=bibstuff.addrefs.CitationFormatter-class.html#__init__,Method __init__()=bibstuff.bibfile.BibEntry-class.html#__init__,Method BibFile.__init__()=bibstuff.bibfile.BibFile-class.html#__init__,Method bibname.BibName.__init__()=bibstuff.bibname.BibName-class.html#__init__,Method bibstyle.BibStyle.__init__()=bibstuff.bibstyle.BibStyle-class.html#__init__,Method bibstyles.shared.CitationManager.__init__()=bibstuff.bibstyles.shared.CitationManager-class.html#__init__,Method bibstyles.shared.CiteRefProcessor.__init__()=bibstuff.bibstyles.shared.CiteRefProcessor-class.html#__init__,Method bibstyles.shared.NameFormatter.__init__()=bibstuff.bibstyles.shared.NameFormatter-class.html#__init__,Method bibstyles.shared.NamesFormatter.__init__()=bibstuff.bibstyles.shared.NamesFormatter-class.html#__init__'); return false;">__init__</a></span></span><span class="py-op">(</span><span class="py-name">self</span><span class="py-op">,</span><span class="py-op">*</span><span class="py-name">args</span><span class="py-op">,</span><span class="py-op">**</span><span class="py-name">kwargs</span><span class="py-op">)</span> </span>
<span class="lineno"> 60</span>  <span class="py-line">                <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_fields</span> <span class="py-op">=</span> <span class="py-op">[</span><span class="py-op">]</span> </span>
<span class="lineno"> 61</span>  <span class="py-line">                <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_names</span> <span class="py-op">=</span> <span class="py-name">None</span> </span>
</div><a name="BibEntry.__repr__"></a><div id="BibEntry.__repr__-def"><span class="lineno"> 62</span> <a class="pysrc-toggle" href="#" id="BibEntry.__repr__-toggle" onclick="toggle('BibEntry.__repr__'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibEntry-class.html#__repr__">__repr__</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibEntry.__repr__-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibEntry.__repr__-expanded"><span class="lineno"> 63</span>  <span class="py-line">                <span class="py-name">str</span> <span class="py-op">=</span> <span class="py-string">'@%s{%s,\n'</span> <span class="py-op">%</span> <span class="py-op">(</span><span class="py-name">self</span><span class="py-op">.</span><span id="link-1" class="py-name"><a title="bibstuff.bibfile.BibEntry.type
bibstuff.bibfile.BibFile.type" class="py-name" href="#" onclick="doclink('link-1', 'type', 'Variable type=bibstuff.bibfile.BibEntry-class.html#type,Method BibFile.type()=bibstuff.bibfile.BibFile-class.html#type'); return false;">type</a></span></span><span class="py-op">.</span><span class="py-name">upper</span><span class="py-op">(</span><span class="py-op">)</span> <span class="py-op">,</span> <span class="py-name">self</span><span class="py-op">.</span><span id="link-2" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-2', 'key', 'Variable key=bibstuff.bibfile.BibEntry-class.html#key,Method BibFile.key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span><span class="py-op">)</span> </span>
<span class="lineno"> 64</span>  <span class="py-line">                <span class="py-name">mlen</span> <span class="py-op">=</span> <span class="py-name">max</span><span class="py-op">(</span> <span class="py-name">len</span><span class="py-op">(</span><span class="py-name">key_str</span><span class="py-op">)</span> <span class="py-keyword">for</span> <span class="py-name">key_str</span> <span class="py-keyword">in</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_fields</span> <span class="py-op">)</span>  <span class="py-comment"># for pretty format</span> </span>
<span class="lineno"> 65</span>  <span class="py-line">                <span class="py-keyword">for</span> <span id="link-3" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-3', 'key', 'Variable key=bibstuff.bibfile.BibEntry-class.html#key,Method BibFile.key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span> <span class="py-keyword">in</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_fields</span><span class="py-op">:</span> </span>
<span class="lineno"> 66</span>  <span class="py-line">                        <span class="py-name">spacer</span> <span class="py-op">=</span> <span class="py-string">' '</span><span class="py-op">*</span><span class="py-op">(</span><span class="py-name">mlen</span> <span class="py-op">-</span> <span class="py-name">len</span><span class="py-op">(</span><span id="link-4" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-4', 'key', 'Variable bibstuff.bibfile.BibEntry.key=bibstuff.bibfile.BibEntry-class.html#key,Method bibstuff.bibfile.BibFile.key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span><span class="py-op">)</span> <span class="py-op">)</span> </span>
<span class="lineno"> 67</span>  <span class="py-line">                        <span class="py-name">str</span> <span class="py-op">+=</span> <span class="py-string">'  %s%s = {%s},\n'</span> <span class="py-op">%</span> <span class="py-op">(</span><span id="link-5" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-5', 'key', 'Variable bibstuff.bibfile.BibEntry.key=bibstuff.bibfile.BibEntry-class.html#key,Method bibstuff.bibfile.BibFile.key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span><span class="py-op">,</span> <span class="py-name">spacer</span><span class="py-op">,</span> <span class="py-name">self</span><span class="py-op">[</span><span id="link-6" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-6', 'key', 'Variable bibstuff.bibfile.BibEntry.key=bibstuff.bibfile.BibEntry-class.html#key,Method bibstuff.bibfile.BibFile.key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span><span class="py-op">]</span><span class="py-op">)</span> </span>
<span class="lineno"> 68</span>  <span class="py-line">                <span class="py-name">str</span> <span class="py-op">+=</span> <span class="py-string">'}\n'</span> </span>
<span class="lineno"> 69</span>  <span class="py-line">                <span class="py-keyword">return</span> <span class="py-name">str</span> </span>
</div><a name="BibEntry.__setitem__"></a><div id="BibEntry.__setitem__-def"><span class="lineno"> 70</span> <a class="pysrc-toggle" href="#" id="BibEntry.__setitem__-toggle" onclick="toggle('BibEntry.__setitem__'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibEntry-class.html#__setitem__">__setitem__</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span> <span class="py-param">key</span><span class="py-op">,</span> <span class="py-param">val</span><span class="py-op">)</span> <span class="py-op">:</span> </span>
</div><div id="BibEntry.__setitem__-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibEntry.__setitem__-expanded"><span class="lineno"> 71</span>  <span class="py-line">                <span id="link-7" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-7', 'key', 'Variable key=bibstuff.bibfile.BibEntry-class.html#key,Method BibFile.key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span> <span class="py-op">=</span> <span id="link-8" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-8', 'key', 'Variable key=bibstuff.bibfile.BibEntry-class.html#key,Method BibFile.key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span><span class="py-op">.</span><span class="py-name">lower</span><span class="py-op">(</span><span class="py-op">)</span> </span>
<span class="lineno"> 72</span>  <span class="py-line">                <span class="py-name">dict</span><span class="py-op">.</span><a title="bibstuff.bibfile.BibEntry.__setitem__" class="py-name" href="bibstuff.bibfile.BibEntry-class.html#__setitem__">__setitem__</a><span class="py-op">(</span><span class="py-name">self</span><span class="py-op">,</span><span id="link-9" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-9', 'key', 'Variable key=bibstuff.bibfile.BibEntry-class.html#key,Method BibFile.key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span><span class="py-op">,</span><span class="py-name">val</span><span class="py-op">)</span> </span>
<span class="lineno"> 73</span>  <span class="py-line">                <span class="py-keyword">if</span> <span id="link-10" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-10', 'key', 'Variable key=bibstuff.bibfile.BibEntry-class.html#key,Method BibFile.key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span> <span class="py-keyword">not</span> <span class="py-keyword">in</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_fields</span> <span class="py-keyword">and</span> <span id="link-11" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-11', 'key', 'Variable key=bibstuff.bibfile.BibEntry-class.html#key,Method BibFile.key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span> <span class="py-keyword">not</span> <span class="py-keyword">in</span> <span class="py-op">[</span><span class="py-string">"key"</span><span class="py-op">,</span><span class="py-string">"type"</span><span class="py-op">]</span><span class="py-op">:</span> </span>
<span class="lineno"> 74</span>  <span class="py-line">                        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_fields</span><span class="py-op">.</span><span class="py-name">append</span><span class="py-op">(</span><span id="link-12" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-12', 'key', 'Variable bibstuff.bibfile.BibEntry.key=bibstuff.bibfile.BibEntry-class.html#key,Method bibstuff.bibfile.BibFile.key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span><span class="py-op">)</span> </span>
</div><a name="BibEntry.__getitem__"></a><div id="BibEntry.__getitem__-def"><span class="lineno"> 75</span> <a class="pysrc-toggle" href="#" id="BibEntry.__getitem__-toggle" onclick="toggle('BibEntry.__getitem__'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibEntry-class.html#__getitem__">__getitem__</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span> <span class="py-param">key</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibEntry.__getitem__-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibEntry.__getitem__-expanded"><span class="lineno"> 76</span>  <span class="py-line">                <span class="py-keyword">try</span><span class="py-op">:</span> </span>
<span class="lineno"> 77</span>  <span class="py-line">                        <span class="py-keyword">return</span> <span class="py-name">dict</span><span class="py-op">.</span><a title="bibstuff.bibfile.BibEntry.__getitem__" class="py-name" href="bibstuff.bibfile.BibEntry-class.html#__getitem__">__getitem__</a><span class="py-op">(</span><span class="py-name">self</span><span class="py-op">,</span> <span id="link-13" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-13', 'key', 'Variable bibstuff.bibfile.BibEntry.key=bibstuff.bibfile.BibEntry-class.html#key,Method bibstuff.bibfile.BibFile.key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span><span class="py-op">.</span><span class="py-name">lower</span><span class="py-op">(</span><span class="py-op">)</span><span class="py-op">)</span> </span>
<span class="lineno"> 78</span>  <span class="py-line">                <span class="py-keyword">except</span> <span class="py-name">KeyError</span><span class="py-op">:</span> </span>
<span class="lineno"> 79</span>  <span class="py-line">                        <span class="py-keyword">return</span> <span class="py-name">None</span> </span>
</div><a name="BibEntry.__delitem__"></a><div id="BibEntry.__delitem__-def"><span class="lineno"> 80</span> <a class="pysrc-toggle" href="#" id="BibEntry.__delitem__-toggle" onclick="toggle('BibEntry.__delitem__'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibEntry-class.html#__delitem__">__delitem__</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span><span class="py-param">key</span><span class="py-op">)</span> <span class="py-op">:</span> </span>
</div><div id="BibEntry.__delitem__-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibEntry.__delitem__-expanded"><span class="lineno"> 81</span>  <span class="py-line">                <span id="link-14" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-14', 'key', 'Variable key=bibstuff.bibfile.BibEntry-class.html#key,Method BibFile.key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span> <span class="py-op">=</span> <span id="link-15" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-15', 'key', 'Variable key=bibstuff.bibfile.BibEntry-class.html#key,Method BibFile.key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span><span class="py-op">.</span><span class="py-name">lower</span><span class="py-op">(</span><span class="py-op">)</span> </span>
<span class="lineno"> 82</span>  <span class="py-line">                <span class="py-keyword">try</span><span class="py-op">:</span> </span>
<span class="lineno"> 83</span>  <span class="py-line">                        <span class="py-name">dict</span><span class="py-op">.</span><a title="bibstuff.bibfile.BibEntry.__delitem__" class="py-name" href="bibstuff.bibfile.BibEntry-class.html#__delitem__">__delitem__</a><span class="py-op">(</span><span class="py-name">self</span><span class="py-op">,</span> <span id="link-16" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-16', 'key', 'Variable bibstuff.bibfile.BibEntry.key=bibstuff.bibfile.BibEntry-class.html#key,Method bibstuff.bibfile.BibFile.key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span><span class="py-op">)</span> </span>
<span class="lineno"> 84</span>  <span class="py-line">                <span class="py-keyword">except</span> <span class="py-name">KeyError</span><span class="py-op">:</span> </span>
<span class="lineno"> 85</span>  <span class="py-line">                        <span class="py-keyword">pass</span> </span>
<span class="lineno"> 86</span>  <span class="py-line">                <span class="py-keyword">try</span><span class="py-op">:</span> </span>
<span class="lineno"> 87</span>  <span class="py-line">                        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_fields</span><span class="py-op">.</span><span class="py-name">remove</span><span class="py-op">(</span><span id="link-17" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-17', 'key', 'Variable bibstuff.bibfile.BibEntry.key=bibstuff.bibfile.BibEntry-class.html#key,Method bibstuff.bibfile.BibFile.key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span><span class="py-op">)</span> </span>
<span class="lineno"> 88</span>  <span class="py-line">                <span class="py-keyword">except</span> <span class="py-name">ValueError</span><span class="py-op">:</span> </span>
<span class="lineno"> 89</span>  <span class="py-line">                        <span class="py-keyword">pass</span> </span>
</div><a name="BibEntry.set_type"></a><div id="BibEntry.set_type-def"><span class="lineno"> 90</span> <a class="pysrc-toggle" href="#" id="BibEntry.set_type-toggle" onclick="toggle('BibEntry.set_type'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibEntry-class.html#set_type">set_type</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span><span class="py-param">str</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibEntry.set_type-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibEntry.set_type-expanded"><span class="lineno"> 91</span>  <span class="py-line">                <span class="py-name">self</span><span class="py-op">[</span><span class="py-string">"type"</span><span class="py-op">]</span> <span class="py-op">=</span> <span class="py-name">str</span><span class="py-op">.</span><span class="py-name">lower</span><span class="py-op">(</span><span class="py-op">)</span>  <span class="py-comment">#ai: type stored as lowercase</span> </span>
</div><a name="BibEntry.get_type"></a><div id="BibEntry.get_type-def"><span class="lineno"> 92</span> <a class="pysrc-toggle" href="#" id="BibEntry.get_type-toggle" onclick="toggle('BibEntry.get_type'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibEntry-class.html#get_type">get_type</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibEntry.get_type-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibEntry.get_type-expanded"><span class="lineno"> 93</span>  <span class="py-line">                <span class="py-keyword">return</span> <span class="py-name">self</span><span class="py-op">[</span><span class="py-string">"type"</span><span class="py-op">]</span> </span>
</div><span class="lineno"> 94</span>  <span class="py-line">        <a class="py-name" href="bibstuff.bibfile.BibEntry-class.html#type">type</a> <span class="py-op">=</span> <span class="py-name">property</span><span class="py-op">(</span><a class="py-name" href="bibstuff.bibfile.BibEntry-class.html#get_type">get_type</a><span class="py-op">,</span><a class="py-name" href="bibstuff.bibfile.BibEntry-class.html#set_type">set_type</a><span class="py-op">,</span><span class="py-name">None</span><span class="py-op">,</span><span class="py-string">"property: 'type'"</span><span class="py-op">)</span> </span>
<a name="BibEntry.set_key"></a><div id="BibEntry.set_key-def"><span class="lineno"> 95</span> <a class="pysrc-toggle" href="#" id="BibEntry.set_key-toggle" onclick="toggle('BibEntry.set_key'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibEntry-class.html#set_key">set_key</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span><span class="py-param">str</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibEntry.set_key-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibEntry.set_key-expanded"><span class="lineno"> 96</span>  <span class="py-line">                <span class="py-name">self</span><span class="py-op">[</span><span class="py-string">"key"</span><span class="py-op">]</span> <span class="py-op">=</span> <span class="py-name">str</span> </span>
</div><a name="BibEntry.get_key"></a><div id="BibEntry.get_key-def"><span class="lineno"> 97</span> <a class="pysrc-toggle" href="#" id="BibEntry.get_key-toggle" onclick="toggle('BibEntry.get_key'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibEntry-class.html#get_key">get_key</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibEntry.get_key-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibEntry.get_key-expanded"><span class="lineno"> 98</span>  <span class="py-line">                <span class="py-keyword">return</span> <span class="py-name">self</span><span class="py-op">[</span><span class="py-string">"key"</span><span class="py-op">]</span> </span>
</div><span class="lineno"> 99</span>  <span class="py-line">        <a class="py-name" href="bibstuff.bibfile.BibEntry-class.html#key">key</a> <span class="py-op">=</span> <span class="py-name">property</span><span class="py-op">(</span><a class="py-name" href="bibstuff.bibfile.BibEntry-class.html#get_key">get_key</a><span class="py-op">,</span><a class="py-name" href="bibstuff.bibfile.BibEntry-class.html#set_key">set_key</a><span class="py-op">,</span><span class="py-name">None</span><span class="py-op">,</span><span class="py-string">"property: 'key'"</span><span class="py-op">)</span> </span>
<a name="BibEntry.get_fields"></a><div id="BibEntry.get_fields-def"><span class="lineno">100</span> <a class="pysrc-toggle" href="#" id="BibEntry.get_fields-toggle" onclick="toggle('BibEntry.get_fields'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibEntry-class.html#get_fields">get_fields</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibEntry.get_fields-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibEntry.get_fields-expanded"><span class="lineno">101</span>  <span class="py-line">                <span class="py-keyword">return</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_fields</span> </span>
</div><a name="BibEntry.set_fields"></a><div id="BibEntry.set_fields-def"><span class="lineno">102</span> <a class="pysrc-toggle" href="#" id="BibEntry.set_fields-toggle" onclick="toggle('BibEntry.set_fields'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibEntry-class.html#set_fields">set_fields</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span><span class="py-param">lst</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibEntry.set_fields-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibEntry.set_fields-expanded"><span class="lineno">103</span>  <span class="py-line">                <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_fields</span> <span class="py-op">=</span> <span class="py-name">lst</span> </span>
</div><span class="lineno">104</span>  <span class="py-line">        <a class="py-name" href="bibstuff.bibfile.BibEntry-class.html#fields">fields</a> <span class="py-op">=</span> <span class="py-name">property</span><span class="py-op">(</span><a class="py-name" href="bibstuff.bibfile.BibEntry-class.html#get_fields">get_fields</a><span class="py-op">,</span><a class="py-name" href="bibstuff.bibfile.BibEntry-class.html#set_fields">set_fields</a><span class="py-op">,</span><span class="py-name">None</span><span class="py-op">,</span><span class="py-string">"property: 'fields'"</span><span class="py-op">)</span> </span>
<a name="BibEntry.AddField"></a><div id="BibEntry.AddField-def"><span class="lineno">105</span> <a class="pysrc-toggle" href="#" id="BibEntry.AddField-toggle" onclick="toggle('BibEntry.AddField'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibEntry-class.html#AddField">AddField</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span> <span class="py-op">(</span><span class="py-param">name</span><span class="py-op">,</span> <span class="py-param">str</span><span class="py-op">)</span><span class="py-op">)</span><span class="py-op">:</span>  <span class="py-comment">#:note: used by BibFile; keep for backwards compatability</span> </span>
</div><span class="lineno">106</span>  <span class="py-line">                <span class="py-name">self</span><span class="py-op">[</span><a title="bibstuff.bibfile.BibFile.name" class="py-name" href="bibstuff.bibfile.BibFile-class.html#name">name</a><span class="py-op">.</span><span class="py-name">lower</span><span class="py-op">(</span><span class="py-op">)</span><span class="py-op">]</span> <span class="py-op">=</span> <span class="py-name">str</span> </span>
</div><span class="lineno">107</span>  <span class="py-line">        <span class="py-comment"># make a list of name dicts to be used in formatting</span> </span>
<a name="BibEntry.make_names"></a><div id="BibEntry.make_names-def"><span class="lineno">108</span> <a class="pysrc-toggle" href="#" id="BibEntry.make_names-toggle" onclick="toggle('BibEntry.make_names'); return false;">-</a><span class="py-line"><span class="py-comment"></span>        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibEntry-class.html#make_names">make_names</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibEntry.make_names-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibEntry.make_names-expanded"><span class="lineno">109</span>  <span class="py-line">                <span class="py-docstring">'''make BibName-object if possible else string</span> </span>
<span class="lineno">110</span>  <span class="py-line"><span class="py-docstring">                '''</span> </span>
<span class="lineno">111</span>  <span class="py-line">                <span class="py-keyword">if</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_names</span><span class="py-op">:</span> </span>
<span class="lineno">112</span>  <span class="py-line">                        <a title="bibstuff.bibfile.bibfile_logger" class="py-name" href="bibstuff.bibfile-module.html#bibfile_logger">bibfile_logger</a><span class="py-op">.</span><span class="py-name">info</span><span class="py-op">(</span><span class="py-string">"BibEntry.make_names: Overwriting existing _names."</span><span class="py-op">)</span> </span>
<span class="lineno">113</span>  <span class="py-line">                <span class="py-comment">#self returns None if field missing (-&gt; no KeyError)</span> </span>
<span class="lineno">114</span>  <span class="py-line"><span class="py-comment"></span>                <span class="py-name">raw_names</span> <span class="py-op">=</span> <span class="py-name">self</span><span class="py-op">[</span><span class="py-string">'author'</span><span class="py-op">]</span> <span class="py-keyword">or</span> <span class="py-name">self</span><span class="py-op">[</span><span class="py-string">'editor'</span><span class="py-op">]</span> <span class="py-comment">#TODO: distinguish author and editor</span> </span>
<span class="lineno">115</span>  <span class="py-line">                <span class="py-keyword">if</span> <span class="py-name">raw_names</span><span class="py-op">:</span> </span>
<span class="lineno">116</span>  <span class="py-line">                        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_names</span> <span class="py-op">=</span> <a title="bibstuff.bibname" class="py-name" href="bibstuff.bibname-module.html">bibname</a><span class="py-op">.</span><a title="bibstuff.bibname.BibName" class="py-name" href="bibstuff.bibname.BibName-class.html">BibName</a><span class="py-op">(</span><span class="py-name">raw_names</span><span class="py-op">)</span>  <span class="py-comment">#names are in a BibName object</span> </span>
<span class="lineno">117</span>  <span class="py-line">                <span class="py-keyword">else</span><span class="py-op">:</span> </span>
<span class="lineno">118</span>  <span class="py-line">                        <a title="bibstuff.bibfile.bibfile_logger" class="py-name" href="bibstuff.bibfile-module.html#bibfile_logger">bibfile_logger</a><span class="py-op">.</span><span class="py-name">warning</span><span class="py-op">(</span><span class="py-string">"No author or editor for bib key "</span><span class="py-op">+</span><span class="py-name">self</span><span class="py-op">.</span><span id="link-18" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-18', 'key', 'Variable bibstuff.bibfile.BibEntry.key=bibstuff.bibfile.BibEntry-class.html#key,Method bibstuff.bibfile.BibFile.key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span><span class="py-op">)</span> </span>
<span class="lineno">119</span>  <span class="py-line">                        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_names</span> <span class="py-op">=</span> <span class="py-name">self</span><span class="py-op">[</span><span class="py-string">'organization'</span><span class="py-op">]</span> <span class="py-keyword">or</span> <span class="py-string">"Anonymous"</span> </span>
</div><span class="lineno">120</span>  <span class="py-line"> </span>
<a name="BibEntry.get_names"></a><div id="BibEntry.get_names-def"><span class="lineno">121</span> <a class="pysrc-toggle" href="#" id="BibEntry.get_names-toggle" onclick="toggle('BibEntry.get_names'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibEntry-class.html#get_names">get_names</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibEntry.get_names-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibEntry.get_names-expanded"><span class="lineno">122</span>  <span class="py-line">                <span class="py-docstring">'''return self._names (BibName-object if possible else string)</span> </span>
<span class="lineno">123</span>  <span class="py-line"><span class="py-docstring">                '''</span> </span>
<span class="lineno">124</span>  <span class="py-line">                <span class="py-keyword">if</span> <span class="py-keyword">not</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_names</span><span class="py-op">:</span> </span>
<span class="lineno">125</span>  <span class="py-line">                        <span class="py-name">self</span><span class="py-op">.</span><a title="bibstuff.bibfile.BibEntry.make_names" class="py-name" href="bibstuff.bibfile.BibEntry-class.html#make_names">make_names</a><span class="py-op">(</span><span class="py-op">)</span> </span>
<span class="lineno">126</span>  <span class="py-line">                <span class="py-keyword">return</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_names</span> </span>
</div><span class="lineno">127</span>  <span class="py-line"> </span>
<span class="lineno">128</span>  <span class="py-line">        <span class="py-comment">#TODO: add default name_template useful for .bib files</span> </span>
<span class="lineno">129</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-comment">#:note: called by CitationManager in format_citation</span> </span>
<a name="BibEntry.format_names"></a><div id="BibEntry.format_names-def"><span class="lineno">130</span> <a class="pysrc-toggle" href="#" id="BibEntry.format_names-toggle" onclick="toggle('BibEntry.format_names'); return false;">-</a><span class="py-line"><span class="py-comment"></span>        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibEntry-class.html#format_names">format_names</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span> <span class="py-param">names_formatter</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibEntry.format_names-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibEntry.format_names-expanded"><span class="lineno">131</span>  <span class="py-line">                <a title="bibstuff.bibfile.bibfile_logger" class="py-name" href="bibstuff.bibfile-module.html#bibfile_logger">bibfile_logger</a><span class="py-op">.</span><span class="py-name">debug</span><span class="py-op">(</span><span class="py-string">"Entering format_names."</span><span class="py-op">)</span> </span>
<span class="lineno">132</span>  <span class="py-line">                <span class="py-keyword">if</span> <span class="py-keyword">not</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_names</span><span class="py-op">:</span> </span>
<span class="lineno">133</span>  <span class="py-line">                        <span class="py-name">self</span><span class="py-op">.</span><a title="bibstuff.bibfile.BibEntry.make_names" class="py-name" href="bibstuff.bibfile.BibEntry-class.html#make_names">make_names</a><span class="py-op">(</span><span class="py-op">)</span> </span>
<span class="lineno">134</span>  <span class="py-line">                <span class="py-comment">#keep string if stuck with it</span> </span>
<span class="lineno">135</span>  <span class="py-line"><span class="py-comment"></span>                <span class="py-keyword">if</span> <span class="py-name">isinstance</span><span class="py-op">(</span><span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_names</span><span class="py-op">,</span><span class="py-name">str</span><span class="py-op">)</span><span class="py-op">:</span> </span>
<span class="lineno">136</span>  <span class="py-line">                        <span class="py-name">result</span> <span class="py-op">=</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_names</span> </span>
<span class="lineno">137</span>  <span class="py-line">                <span class="py-keyword">else</span><span class="py-op">:</span> <span class="py-comment">#assume a BibName object</span> </span>
<span class="lineno">138</span>  <span class="py-line">                        <span class="py-name">result</span> <span class="py-op">=</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_names</span><span class="py-op">.</span><a title="bibstuff.bibname.BibName.format" class="py-name" href="bibstuff.bibname.BibName-class.html#format">format</a><span class="py-op">(</span><span class="py-name">names_formatter</span><span class="py-op">)</span> </span>
<span class="lineno">139</span>  <span class="py-line">                <a title="bibstuff.bibfile.bibfile_logger" class="py-name" href="bibstuff.bibfile-module.html#bibfile_logger">bibfile_logger</a><span class="py-op">.</span><span class="py-name">debug</span><span class="py-op">(</span><span class="py-string">"Exiting format_names."</span><span class="py-op">)</span> </span>
<span class="lineno">140</span>  <span class="py-line">                <span class="py-keyword">return</span> <span class="py-name">result</span> </span>
</div></div><span class="lineno">141</span>  <span class="py-line"> </span>
<span class="lineno">142</span>  <span class="py-line"> </span>
<span class="lineno">143</span>  <span class="py-line"><span class="py-comment">##class BibError(StandardError):</span> </span>
<span class="lineno">144</span>  <span class="py-line"><span class="py-comment"></span><span class="py-comment">##    def __init__(self, str):</span> </span>
<span class="lineno">145</span>  <span class="py-line"><span class="py-comment"></span><span class="py-comment">##        self.str = str</span> </span>
<span class="lineno">146</span>  <span class="py-line"><span class="py-comment"></span> </span>
<span class="lineno">147</span>  <span class="py-line"><span class="py-comment">##    def __repr__(self):</span> </span>
<span class="lineno">148</span>  <span class="py-line"><span class="py-comment"></span><span class="py-comment">##        return self.str</span> </span>
<span class="lineno">149</span>  <span class="py-line"><span class="py-comment"></span>     </span>
<span class="lineno">150</span>  <span class="py-line"><span class="py-comment">##    def __str__(self):</span> </span>
<span class="lineno">151</span>  <span class="py-line"><span class="py-comment"></span><span class="py-comment">##        return self.__repr__()</span> </span>
<span class="lineno">152</span>  <span class="py-line"><span class="py-comment"></span> </span>
<span class="lineno">153</span>  <span class="py-line"> </span>
<span class="lineno">154</span>  <span class="py-line"><span class="py-comment"># ----------------------------------------------------------</span> </span>
<span class="lineno">155</span>  <span class="py-line"><span class="py-comment"></span><span class="py-comment"># Bibfile</span> </span>
<span class="lineno">156</span>  <span class="py-line"><span class="py-comment"></span><span class="py-comment"># -------</span> </span>
<span class="lineno">157</span>  <span class="py-line"><span class="py-comment"></span><span class="py-comment"># Data storage for bibtex file</span> </span>
<span class="lineno">158</span>  <span class="py-line"><span class="py-comment"></span><span class="py-comment"># ----------------------------------------------------------</span> </span>
<a name="BibFile"></a><div id="BibFile-def"><span class="lineno">159</span> <a class="pysrc-toggle" href="#" id="BibFile-toggle" onclick="toggle('BibFile'); return false;">-</a><span class="py-line"><span class="py-comment"></span><span class="py-keyword">class</span> <a class="py-def-name" href="bibstuff.bibfile.BibFile-class.html">BibFile</a><span class="py-op">(</span> <span class="py-base-class">DispatchProcessor</span> <span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibFile-collapsed" style="display:none;" pad="+++" indent="++++"></div><div id="BibFile-expanded"><span class="lineno">160</span>  <span class="py-line">        <span class="py-docstring">'''Stores parsed bibtex file.  Access entries by key.'''</span> </span>
<a name="BibFile.__init__"></a><div id="BibFile.__init__-def"><span class="lineno">161</span> <a class="pysrc-toggle" href="#" id="BibFile.__init__-toggle" onclick="toggle('BibFile.__init__'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibFile-class.html#__init__">__init__</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">)</span> <span class="py-op">:</span> </span>
</div><div id="BibFile.__init__-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibFile.__init__-expanded"><span class="lineno">162</span>  <span class="py-line">                <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">entries</span> <span class="py-op">=</span> <span class="py-op">[</span><span class="py-op">]</span> </span>
<span class="lineno">163</span>  <span class="py-line">                <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_macroMap</span> <span class="py-op">=</span> <span class="py-op">{</span><span class="py-op">}</span> </span>
<span class="lineno">164</span>  <span class="py-line">                <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">log</span> <span class="py-op">=</span> <span class="py-op">[</span><span class="py-op">]</span> <span class="py-comment"># log of warnings, errors, etc</span> </span>
</div><span class="lineno">165</span>  <span class="py-line"> </span>
<a name="BibFile.get_entrylist"></a><div id="BibFile.get_entrylist-def"><span class="lineno">166</span> <a class="pysrc-toggle" href="#" id="BibFile.get_entrylist-toggle" onclick="toggle('BibFile.get_entrylist'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibFile-class.html#get_entrylist">get_entrylist</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span><span class="py-param">keylist</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibFile.get_entrylist-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibFile.get_entrylist-expanded"><span class="lineno">167</span>  <span class="py-line">                <span class="py-keyword">if</span> <span class="py-keyword">not</span> <span class="py-name">keylist</span><span class="py-op">:</span> </span>
<span class="lineno">168</span>  <span class="py-line">                        <a title="bibstuff.bibfile.bibfile_logger" class="py-name" href="bibstuff.bibfile-module.html#bibfile_logger">bibfile_logger</a><span class="py-op">.</span><span class="py-name">info</span><span class="py-op">(</span><span class="py-string">"No keys provided; returning empty cited-entry list."</span><span class="py-op">)</span> </span>
<span class="lineno">169</span>  <span class="py-line">                        <span class="py-keyword">return</span> <span class="py-op">[</span><span class="py-op">]</span> </span>
<span class="lineno">170</span>  <span class="py-line">                <span class="py-name">temp</span> <span class="py-op">=</span> <span class="py-op">[</span><span class="py-op">(</span><span id="link-19" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-19', 'key', 'Variable BibEntry.key=bibstuff.bibfile.BibEntry-class.html#key,Method key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span><span class="py-op">,</span><span class="py-name">self</span><span class="py-op">.</span><a title="bibstuff.bibfile.BibFile.get_entry_by_key" class="py-name" href="bibstuff.bibfile.BibFile-class.html#get_entry_by_key">get_entry_by_key</a><span class="py-op">(</span><span id="link-20" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-20', 'key', 'Variable BibEntry.key=bibstuff.bibfile.BibEntry-class.html#key,Method key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span><span class="py-op">)</span><span class="py-op">)</span> <span class="py-keyword">for</span> <span id="link-21" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-21', 'key', 'Variable BibEntry.key=bibstuff.bibfile.BibEntry-class.html#key,Method key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span> <span class="py-keyword">in</span> <span class="py-name">keylist</span><span class="py-op">]</span> </span>
<span class="lineno">171</span>  <span class="py-line">                <span class="py-name">bad_keys</span> <span class="py-op">=</span> <span class="py-op">[</span><span class="py-name">pair</span><span class="py-op">[</span><span class="py-number">0</span><span class="py-op">]</span> <span class="py-keyword">for</span> <span class="py-name">pair</span> <span class="py-keyword">in</span> <span class="py-name">temp</span> <span class="py-keyword">if</span> <span class="py-keyword">not</span> <span class="py-name">pair</span><span class="py-op">[</span><span class="py-number">1</span><span class="py-op">]</span><span class="py-op">]</span> </span>
<span class="lineno">172</span>  <span class="py-line">                <span class="py-keyword">if</span> <span class="py-name">bad_keys</span><span class="py-op">:</span> </span>
<span class="lineno">173</span>  <span class="py-line">                        <a title="bibstuff.bibfile.bibfile_logger" class="py-name" href="bibstuff.bibfile-module.html#bibfile_logger">bibfile_logger</a><span class="py-op">.</span><span class="py-name">warning</span><span class="py-op">(</span><span class="py-string">"Database entries not found for the following keys:\n"</span><span class="py-op">+</span><span class="py-string">"\n"</span><span class="py-op">.</span><span class="py-name">join</span><span class="py-op">(</span><span class="py-name">bad_keys</span><span class="py-op">)</span><span class="py-op">)</span> </span>
<span class="lineno">174</span>  <span class="py-line">                <span class="py-keyword">return</span> <span class="py-op">[</span><span class="py-name">pair</span><span class="py-op">[</span><span class="py-number">1</span><span class="py-op">]</span> <span class="py-keyword">for</span> <span class="py-name">pair</span> <span class="py-keyword">in</span> <span class="py-name">temp</span> <span class="py-keyword">if</span> <span class="py-name">pair</span><span class="py-op">[</span><span class="py-number">1</span><span class="py-op">]</span><span class="py-op">]</span> </span>
</div><span class="lineno">175</span>  <span class="py-line">                 </span>
<a name="BibFile.get_entry_by_key"></a><div id="BibFile.get_entry_by_key-def"><span class="lineno">176</span> <a class="pysrc-toggle" href="#" id="BibFile.get_entry_by_key-toggle" onclick="toggle('BibFile.get_entry_by_key'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibFile-class.html#get_entry_by_key">get_entry_by_key</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span> <span class="py-param">key</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibFile.get_entry_by_key-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibFile.get_entry_by_key-expanded"><span class="lineno">177</span>  <span class="py-line">                <span class="py-keyword">for</span> <a title="bibstuff.bibfile.BibFile.entry" class="py-name" href="bibstuff.bibfile.BibFile-class.html#entry">entry</a> <span class="py-keyword">in</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">entries</span><span class="py-op">:</span> </span>
<span class="lineno">178</span>  <span class="py-line">                        <span class="py-keyword">if</span> <a title="bibstuff.bibfile.BibFile.entry" class="py-name" href="bibstuff.bibfile.BibFile-class.html#entry">entry</a><span class="py-op">.</span><span id="link-22" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-22', 'key', 'Variable bibstuff.bibfile.BibEntry.key=bibstuff.bibfile.BibEntry-class.html#key,Method bibstuff.bibfile.BibFile.key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span> <span class="py-op">==</span> <span id="link-23" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-23', 'key', 'Variable bibstuff.bibfile.BibEntry.key=bibstuff.bibfile.BibEntry-class.html#key,Method bibstuff.bibfile.BibFile.key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span><span class="py-op">:</span> </span>
<span class="lineno">179</span>  <span class="py-line">                                <span class="py-keyword">return</span> <a title="bibstuff.bibfile.BibFile.entry" class="py-name" href="bibstuff.bibfile.BibFile-class.html#entry">entry</a> </span>
</div><span class="lineno">180</span>  <span class="py-line"> </span>
<a name="BibFile.returnByKey"></a><div id="BibFile.returnByKey-def"><span class="lineno">181</span> <a class="pysrc-toggle" href="#" id="BibFile.returnByKey-toggle" onclick="toggle('BibFile.returnByKey'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibFile-class.html#returnByKey">returnByKey</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span> <span class="py-param">key</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibFile.returnByKey-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibFile.returnByKey-expanded"><span class="lineno">182</span>  <span class="py-line">                <span class="py-keyword">for</span> <span class="py-name">e</span> <span class="py-keyword">in</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">entries</span><span class="py-op">:</span> </span>
<span class="lineno">183</span>  <span class="py-line">                        <span class="py-keyword">if</span> <span class="py-name">e</span><span class="py-op">.</span><span id="link-24" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-24', 'key', 'Variable bibstuff.bibfile.BibEntry.key=bibstuff.bibfile.BibEntry-class.html#key,Method bibstuff.bibfile.BibFile.key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span> <span class="py-op">==</span> <span id="link-25" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-25', 'key', 'Variable bibstuff.bibfile.BibEntry.key=bibstuff.bibfile.BibEntry-class.html#key,Method bibstuff.bibfile.BibFile.key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span> <span class="py-op">:</span> <span class="py-keyword">return</span> <span class="py-name">e</span> </span>
<span class="lineno">184</span>  <span class="py-line">                <span class="py-keyword">return</span> <span class="py-name">None</span> </span>
</div><span class="lineno">185</span>  <span class="py-line"> </span>
<a name="BibFile.string"></a><div id="BibFile.string-def"><span class="lineno">186</span> <a class="pysrc-toggle" href="#" id="BibFile.string-toggle" onclick="toggle('BibFile.string'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibFile-class.html#string">string</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span> <span class="py-op">(</span><span class="py-param">tag</span><span class="py-op">,</span><span class="py-param">start</span><span class="py-op">,</span><span class="py-param">stop</span><span class="py-op">,</span><span class="py-param">subtags</span><span class="py-op">)</span><span class="py-op">,</span> <span class="py-param">buffer</span> <span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibFile.string-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibFile.string-expanded"><span class="lineno">187</span>  <span class="py-line">                <span class="py-docstring">"""Return a string, stripping leading and trailing markers"""</span> </span>
<span class="lineno">188</span>  <span class="py-line">                <span class="py-keyword">return</span> <span class="py-name">buffer</span><span class="py-op">[</span><span class="py-name">start</span><span class="py-op">+</span><span class="py-number">1</span><span class="py-op">:</span><span class="py-name">stop</span><span class="py-op">-</span><span class="py-number">1</span><span class="py-op">]</span> </span>
</div><span class="lineno">189</span>  <span class="py-line"> </span>
<a name="BibFile.number"></a><div id="BibFile.number-def"><span class="lineno">190</span> <a class="pysrc-toggle" href="#" id="BibFile.number-toggle" onclick="toggle('BibFile.number'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibFile-class.html#number">number</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span> <span class="py-op">(</span><span class="py-param">tag</span><span class="py-op">,</span><span class="py-param">start</span><span class="py-op">,</span><span class="py-param">stop</span><span class="py-op">,</span><span class="py-param">subtags</span><span class="py-op">)</span><span class="py-op">,</span> <span class="py-param">buffer</span> <span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibFile.number-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibFile.number-expanded"><span class="lineno">191</span>  <span class="py-line">                <span class="py-docstring">'''return a number as a string'''</span> </span>
<span class="lineno">192</span>  <span class="py-line">                <span class="py-keyword">return</span> <span class="py-name">buffer</span><span class="py-op">[</span><span class="py-name">start</span><span class="py-op">:</span><span class="py-name">stop</span><span class="py-op">]</span> </span>
</div><span class="lineno">193</span>  <span class="py-line"> </span>
<a name="BibFile.type"></a><div id="BibFile.type-def"><span class="lineno">194</span> <a class="pysrc-toggle" href="#" id="BibFile.type-toggle" onclick="toggle('BibFile.type'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibFile-class.html#type">type</a><span class="py-op">(</span> <span class="py-param">self</span><span class="py-op">,</span> <span class="py-op">(</span><span class="py-param">tag</span><span class="py-op">,</span><span class="py-param">start</span><span class="py-op">,</span><span class="py-param">stop</span><span class="py-op">,</span><span class="py-param">subtags</span><span class="py-op">)</span><span class="py-op">,</span> <span class="py-param">buffer</span> <span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibFile.type-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibFile.type-expanded"><span class="lineno">195</span>  <span class="py-line">                <span class="py-docstring">"""Return the entry type"""</span> </span>
<span class="lineno">196</span>  <span class="py-line">                <span class="py-keyword">return</span> <span class="py-name">getString</span><span class="py-op">(</span><span class="py-op">(</span><span class="py-name">tag</span><span class="py-op">,</span><span class="py-name">start</span><span class="py-op">,</span><span class="py-name">stop</span><span class="py-op">,</span><span class="py-name">subtags</span><span class="py-op">)</span><span class="py-op">,</span> <span class="py-name">buffer</span><span class="py-op">)</span> </span>
</div><span class="lineno">197</span>  <span class="py-line"> </span>
<a name="BibFile.key"></a><div id="BibFile.key-def"><span class="lineno">198</span> <a class="pysrc-toggle" href="#" id="BibFile.key-toggle" onclick="toggle('BibFile.key'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibFile-class.html#key">key</a><span class="py-op">(</span> <span class="py-param">self</span><span class="py-op">,</span> <span class="py-op">(</span><span class="py-param">tag</span><span class="py-op">,</span><span class="py-param">start</span><span class="py-op">,</span><span class="py-param">stop</span><span class="py-op">,</span><span class="py-param">subtags</span><span class="py-op">)</span><span class="py-op">,</span> <span class="py-param">buffer</span> <span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibFile.key-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibFile.key-expanded"><span class="lineno">199</span>  <span class="py-line">                <span class="py-docstring">"""Return the entry key"""</span> </span>
<span class="lineno">200</span>  <span class="py-line">                <span class="py-keyword">return</span> <span class="py-name">getString</span><span class="py-op">(</span><span class="py-op">(</span><span class="py-name">tag</span><span class="py-op">,</span><span class="py-name">start</span><span class="py-op">,</span><span class="py-name">stop</span><span class="py-op">,</span><span class="py-name">subtags</span><span class="py-op">)</span><span class="py-op">,</span> <span class="py-name">buffer</span><span class="py-op">)</span> </span>
</div><span class="lineno">201</span>  <span class="py-line"> </span>
<span class="lineno">202</span>  <span class="py-line">        <span class="py-comment"># macro name</span> </span>
<a name="BibFile.name"></a><div id="BibFile.name-def"><span class="lineno">203</span> <a class="pysrc-toggle" href="#" id="BibFile.name-toggle" onclick="toggle('BibFile.name'); return false;">-</a><span class="py-line"><span class="py-comment"></span>        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibFile-class.html#name">name</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span> <span class="py-op">(</span><span class="py-param">tag</span><span class="py-op">,</span><span class="py-param">start</span><span class="py-op">,</span><span class="py-param">stop</span><span class="py-op">,</span><span class="py-param">subtags</span><span class="py-op">)</span><span class="py-op">,</span> <span class="py-param">buffer</span> <span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibFile.name-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibFile.name-expanded"><span class="lineno">204</span>  <span class="py-line">                <span class="py-docstring">'''Return lookup on name or name if not in map.'''</span> </span>
<span class="lineno">205</span>  <span class="py-line">                <span class="py-keyword">return</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_macroMap</span><span class="py-op">.</span><span class="py-name">get</span><span class="py-op">(</span><span class="py-name">buffer</span><span class="py-op">[</span><span class="py-name">start</span><span class="py-op">:</span><span class="py-name">stop</span><span class="py-op">]</span><span class="py-op">,</span><span class="py-name">buffer</span><span class="py-op">[</span><span class="py-name">start</span><span class="py-op">:</span><span class="py-name">stop</span><span class="py-op">]</span><span class="py-op">)</span> </span>
</div><span class="lineno">206</span>  <span class="py-line"> </span>
<a name="BibFile.field"></a><div id="BibFile.field-def"><span class="lineno">207</span> <a class="pysrc-toggle" href="#" id="BibFile.field-toggle" onclick="toggle('BibFile.field'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibFile-class.html#field">field</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span> <span class="py-op">(</span><span class="py-param">tag</span><span class="py-op">,</span><span class="py-param">start</span><span class="py-op">,</span><span class="py-param">stop</span><span class="py-op">,</span><span class="py-param">subtags</span><span class="py-op">)</span><span class="py-op">,</span> <span class="py-param">buffer</span> <span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibFile.field-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibFile.field-expanded"><span class="lineno">208</span>  <span class="py-line">                <span class="py-docstring">'''Process a bibentry field and return tuple of name, value.'''</span> </span>
<span class="lineno">209</span>  <span class="py-line">                <span class="py-name">str</span> <span class="py-op">=</span> <span class="py-string">''</span> </span>
<span class="lineno">210</span>  <span class="py-line">                <span class="py-keyword">for</span> <span class="py-name">t</span> <span class="py-keyword">in</span> <span class="py-name">subtags</span><span class="py-op">[</span><span class="py-number">1</span><span class="py-op">]</span><span class="py-op">[</span><span class="py-number">3</span><span class="py-op">]</span><span class="py-op">:</span> </span>
<span class="lineno">211</span>  <span class="py-line">                        <span class="py-keyword">if</span><span class="py-op">(</span><span class="py-name">t</span><span class="py-op">)</span> <span class="py-op">:</span> </span>
<span class="lineno">212</span>  <span class="py-line">                                <span class="py-name">str</span> <span class="py-op">+=</span> <span class="py-name">dispatch</span><span class="py-op">(</span><span class="py-name">self</span><span class="py-op">,</span> <span class="py-name">t</span><span class="py-op">,</span> <span class="py-name">buffer</span><span class="py-op">)</span> <span class="py-comment"># concatenate hashed together strings</span> </span>
<span class="lineno">213</span>  <span class="py-line">                <span class="py-keyword">return</span> <span class="py-op">(</span><span class="py-name">dispatch</span><span class="py-op">(</span><span class="py-name">self</span><span class="py-op">,</span> <span class="py-name">subtags</span><span class="py-op">[</span><span class="py-number">0</span><span class="py-op">]</span><span class="py-op">,</span> <span class="py-name">buffer</span><span class="py-op">)</span><span class="py-op">,</span> <span class="py-name">str</span><span class="py-op">)</span> </span>
</div><span class="lineno">214</span>  <span class="py-line">                                 </span>
<a name="BibFile.entry"></a><div id="BibFile.entry-def"><span class="lineno">215</span> <a class="pysrc-toggle" href="#" id="BibFile.entry-toggle" onclick="toggle('BibFile.entry'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibFile-class.html#entry">entry</a><span class="py-op">(</span> <span class="py-param">self</span><span class="py-op">,</span> <span class="py-op">(</span><span class="py-param">tag</span><span class="py-op">,</span><span class="py-param">start</span><span class="py-op">,</span><span class="py-param">stop</span><span class="py-op">,</span><span class="py-param">subtags</span><span class="py-op">)</span><span class="py-op">,</span> <span class="py-param">buffer</span> <span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibFile.entry-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibFile.entry-expanded"><span class="lineno">216</span>  <span class="py-line">                <span class="py-docstring">"""Process the bibentry and it's children"""</span> </span>
<span class="lineno">217</span>  <span class="py-line">                <a title="bibstuff.bibfile.BibFile.entry" class="py-name" href="bibstuff.bibfile.BibFile-class.html#entry">entry</a> <span class="py-op">=</span> <a title="bibstuff.bibfile.BibEntry" class="py-name" href="bibstuff.bibfile.BibEntry-class.html">BibEntry</a><span class="py-op">(</span><span class="py-op">)</span>  <span class="py-comment">#ai: tentative change from BibEntry to BibEntry</span> </span>
<span class="lineno">218</span>  <span class="py-line">                <a title="bibstuff.bibfile.BibFile.entry" class="py-name" href="bibstuff.bibfile.BibFile-class.html#entry">entry</a><span class="py-op">.</span><span id="link-26" class="py-name"><a title="bibstuff.bibfile.BibEntry.type
bibstuff.bibfile.BibFile.type" class="py-name" href="#" onclick="doclink('link-26', 'type', 'Variable BibEntry.type=bibstuff.bibfile.BibEntry-class.html#type,Method type()=bibstuff.bibfile.BibFile-class.html#type'); return false;">type</a></span></span> <span class="py-op">=</span> <span class="py-name">dispatch</span><span class="py-op">(</span><span class="py-name">self</span><span class="py-op">,</span> <span class="py-name">subtags</span><span class="py-op">[</span><span class="py-number">0</span><span class="py-op">]</span><span class="py-op">,</span> <span class="py-name">buffer</span><span class="py-op">)</span> </span>
<span class="lineno">219</span>  <span class="py-line">                <a title="bibstuff.bibfile.BibFile.entry" class="py-name" href="bibstuff.bibfile.BibFile-class.html#entry">entry</a><span class="py-op">.</span><span id="link-27" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-27', 'key', 'Variable BibEntry.key=bibstuff.bibfile.BibEntry-class.html#key,Method key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span>  <span class="py-op">=</span> <span class="py-name">dispatch</span><span class="py-op">(</span><span class="py-name">self</span><span class="py-op">,</span> <span class="py-name">subtags</span><span class="py-op">[</span><span class="py-number">1</span><span class="py-op">]</span><span class="py-op">,</span> <span class="py-name">buffer</span><span class="py-op">)</span> </span>
<span class="lineno">220</span>  <span class="py-line">                <span class="py-keyword">for</span> <a title="bibstuff.bibfile.BibFile.field" class="py-name" href="bibstuff.bibfile.BibFile-class.html#field">field</a> <span class="py-keyword">in</span> <span class="py-name">subtags</span><span class="py-op">[</span><span class="py-number">2</span><span class="py-op">]</span><span class="py-op">[</span><span class="py-number">3</span><span class="py-op">]</span> <span class="py-op">:</span> </span>
<span class="lineno">221</span>  <span class="py-line">                        <a title="bibstuff.bibfile.BibFile.entry" class="py-name" href="bibstuff.bibfile.BibFile-class.html#entry">entry</a><span class="py-op">.</span><a title="bibstuff.bibfile.BibEntry.AddField" class="py-name" href="bibstuff.bibfile.BibEntry-class.html#AddField">AddField</a><span class="py-op">(</span><span class="py-name">dispatch</span><span class="py-op">(</span><span class="py-name">self</span><span class="py-op">,</span> <a title="bibstuff.bibfile.BibFile.field" class="py-name" href="bibstuff.bibfile.BibFile-class.html#field">field</a><span class="py-op">,</span> <span class="py-name">buffer</span><span class="py-op">)</span><span class="py-op">)</span> </span>
<span class="lineno">222</span>  <span class="py-line">                <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">entries</span><span class="py-op">.</span><span class="py-name">append</span><span class="py-op">(</span><a title="bibstuff.bibfile.BibFile.entry" class="py-name" href="bibstuff.bibfile.BibFile-class.html#entry">entry</a><span class="py-op">)</span> </span>
</div><span class="lineno">223</span>  <span class="py-line">         </span>
<span class="lineno">224</span>  <span class="py-line"> </span>
<a name="BibFile.macro"></a><div id="BibFile.macro-def"><span class="lineno">225</span> <a class="pysrc-toggle" href="#" id="BibFile.macro-toggle" onclick="toggle('BibFile.macro'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibFile-class.html#macro">macro</a><span class="py-op">(</span> <span class="py-param">self</span><span class="py-op">,</span> <span class="py-op">(</span><span class="py-param">tag</span><span class="py-op">,</span><span class="py-param">start</span><span class="py-op">,</span><span class="py-param">stop</span><span class="py-op">,</span><span class="py-param">subtags</span><span class="py-op">)</span><span class="py-op">,</span> <span class="py-param">buffer</span> <span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibFile.macro-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibFile.macro-expanded"><span class="lineno">226</span>  <span class="py-line">                <span class="py-docstring">"""Process a macro entry and add macros to macro map"""</span> </span>
<span class="lineno">227</span>  <span class="py-line">                <span class="py-name">the_type</span> <span class="py-op">=</span> <span class="py-name">getString</span><span class="py-op">(</span><span class="py-name">subtags</span><span class="py-op">[</span><span class="py-number">0</span><span class="py-op">]</span><span class="py-op">,</span> <span class="py-name">buffer</span><span class="py-op">)</span> </span>
<span class="lineno">228</span>  <span class="py-line">                <span class="py-keyword">if</span>  <span class="py-name">the_type</span><span class="py-op">.</span><span class="py-name">upper</span><span class="py-op">(</span><span class="py-op">)</span> <span class="py-op">!=</span> <span class="py-string">'STRING'</span> <span class="py-op">:</span> </span>
<span class="lineno">229</span>  <span class="py-line">                        <span class="py-comment"># it looks like  a macro, but is not: could be a regular entry with no key</span> </span>
<span class="lineno">230</span>  <span class="py-line"><span class="py-comment"></span>                        <span class="py-name">lineno</span> <span class="py-op">=</span> <span class="py-number">0</span> </span>
<span class="lineno">231</span>  <span class="py-line">                        <span class="py-comment">#lineno = lines(0, start, buffer)+1</span> </span>
<span class="lineno">232</span>  <span class="py-line"><span class="py-comment"></span>                        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">log</span><span class="py-op">.</span><span class="py-name">append</span><span class="py-op">(</span><span class="py-string">"WARNING: Entry at line %d has macro syntax, but type is %s"</span> <span class="py-op">%</span> <span class="py-op">(</span><span class="py-name">lineno</span> <span class="py-op">,</span>  <span class="py-name">the_type</span><span class="py-op">)</span><span class="py-op">)</span> </span>
<span class="lineno">233</span>  <span class="py-line">                        <span class="py-keyword">if</span> <span class="py-keyword">not</span> <a title="bibstuff.bibfile.__strict__" class="py-name" href="bibstuff.bibfile-module.html#__strict__">__strict__</a><span class="py-op">:</span> <span class="py-comment"># we can add a dummy key and treat this entry as a regular entry</span> </span>
<span class="lineno">234</span>  <span class="py-line">                                <a title="bibstuff.bibfile.BibFile.entry" class="py-name" href="bibstuff.bibfile.BibFile-class.html#entry">entry</a> <span class="py-op">=</span> <a title="bibstuff.bibfile.BibEntry" class="py-name" href="bibstuff.bibfile.BibEntry-class.html">BibEntry</a><span class="py-op">(</span><span class="py-op">)</span> </span>
<span class="lineno">235</span>  <span class="py-line">                                <a title="bibstuff.bibfile.BibFile.entry" class="py-name" href="bibstuff.bibfile.BibFile-class.html#entry">entry</a><span class="py-op">.</span><span id="link-28" class="py-name"><a title="bibstuff.bibfile.BibEntry.type
bibstuff.bibfile.BibFile.type" class="py-name" href="#" onclick="doclink('link-28', 'type', 'Variable bibstuff.bibfile.BibEntry.type=bibstuff.bibfile.BibEntry-class.html#type,Method bibstuff.bibfile.BibFile.type()=bibstuff.bibfile.BibFile-class.html#type'); return false;">type</a></span></span> <span class="py-op">=</span> <span class="py-name">dispatch</span><span class="py-op">(</span><span class="py-name">self</span><span class="py-op">,</span> <span class="py-name">subtags</span><span class="py-op">[</span><span class="py-number">0</span><span class="py-op">]</span><span class="py-op">,</span> <span class="py-name">buffer</span><span class="py-op">)</span> </span>
<span class="lineno">236</span>  <span class="py-line">                                <a title="bibstuff.bibfile.BibFile.entry" class="py-name" href="bibstuff.bibfile.BibFile-class.html#entry">entry</a><span class="py-op">.</span><span id="link-29" class="py-name"><a title="bibstuff.bibfile.BibEntry.key
bibstuff.bibfile.BibFile.key" class="py-name" href="#" onclick="doclink('link-29', 'key', 'Variable bibstuff.bibfile.BibEntry.key=bibstuff.bibfile.BibEntry-class.html#key,Method bibstuff.bibfile.BibFile.key()=bibstuff.bibfile.BibFile-class.html#key'); return false;">key</a></span></span>  <span class="py-op">=</span> <span class="py-string">'KEY'</span>  <span class="py-comment"># dummy key -- or should we be strict?</span> </span>
<span class="lineno">237</span>  <span class="py-line">                                <span class="py-keyword">for</span> <a title="bibstuff.bibfile.BibFile.field" class="py-name" href="bibstuff.bibfile.BibFile-class.html#field">field</a> <span class="py-keyword">in</span> <span class="py-name">subtags</span><span class="py-op">[</span><span class="py-number">1</span><span class="py-op">]</span><span class="py-op">[</span><span class="py-number">3</span><span class="py-op">]</span> <span class="py-op">:</span> </span>
<span class="lineno">238</span>  <span class="py-line">                                        <a title="bibstuff.bibfile.BibFile.entry" class="py-name" href="bibstuff.bibfile.BibFile-class.html#entry">entry</a><span class="py-op">.</span><a title="bibstuff.bibfile.BibEntry.AddField" class="py-name" href="bibstuff.bibfile.BibEntry-class.html#AddField">AddField</a><span class="py-op">(</span><span class="py-name">dispatch</span><span class="py-op">(</span><span class="py-name">self</span><span class="py-op">,</span> <a title="bibstuff.bibfile.BibFile.field" class="py-name" href="bibstuff.bibfile.BibFile-class.html#field">field</a><span class="py-op">,</span> <span class="py-name">buffer</span><span class="py-op">)</span><span class="py-op">)</span> </span>
<span class="lineno">239</span>  <span class="py-line">                                <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">entries</span><span class="py-op">.</span><span class="py-name">append</span><span class="py-op">(</span><a title="bibstuff.bibfile.BibFile.entry" class="py-name" href="bibstuff.bibfile.BibFile-class.html#entry">entry</a><span class="py-op">)</span> </span>
<span class="lineno">240</span>  <span class="py-line">                                <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">log</span><span class="py-op">.</span><span class="py-name">append</span><span class="py-op">(</span><span class="py-string">"Dummy key added to entry at line %d"</span> <span class="py-op">%</span> <span class="py-name">lineno</span><span class="py-op">)</span> </span>
<span class="lineno">241</span>  <span class="py-line">                <span class="py-keyword">else</span> <span class="py-op">:</span>  <span class="py-comment"># otherwise it is really a macro entry</span> </span>
<span class="lineno">242</span>  <span class="py-line">                        <span class="py-keyword">for</span> <a title="bibstuff.bibfile.BibFile.field" class="py-name" href="bibstuff.bibfile.BibFile-class.html#field">field</a> <span class="py-keyword">in</span> <span class="py-name">subtags</span><span class="py-op">[</span><span class="py-number">1</span><span class="py-op">]</span><span class="py-op">[</span><span class="py-number">3</span><span class="py-op">]</span><span class="py-op">:</span> </span>
<span class="lineno">243</span>  <span class="py-line">                                <a title="bibstuff.bibfile.BibFile.name" class="py-name" href="bibstuff.bibfile.BibFile-class.html#name">name</a><span class="py-op">,</span> <span class="py-name">str</span> <span class="py-op">=</span> <span class="py-name">dispatch</span><span class="py-op">(</span><span class="py-name">self</span><span class="py-op">,</span> <a title="bibstuff.bibfile.BibFile.field" class="py-name" href="bibstuff.bibfile.BibFile-class.html#field">field</a><span class="py-op">,</span> <span class="py-name">buffer</span><span class="py-op">)</span> </span>
<span class="lineno">244</span>  <span class="py-line">                                <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_macroMap</span><span class="py-op">[</span><a title="bibstuff.bibfile.BibFile.name" class="py-name" href="bibstuff.bibfile.BibFile-class.html#name">name</a><span class="py-op">]</span> <span class="py-op">=</span> <span class="py-name">str</span>   </span>
</div><span class="lineno">245</span>  <span class="py-line">                 </span>
<span class="lineno">246</span>  <span class="py-line"> </span>
<a name="BibFile.preamble"></a><div id="BibFile.preamble-def"><span class="lineno">247</span> <a class="pysrc-toggle" href="#" id="BibFile.preamble-toggle" onclick="toggle('BibFile.preamble'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibFile-class.html#preamble">preamble</a><span class="py-op">(</span> <span class="py-param">self</span><span class="py-op">,</span> <span class="py-op">(</span><span class="py-param">tag</span><span class="py-op">,</span><span class="py-param">start</span><span class="py-op">,</span><span class="py-param">stop</span><span class="py-op">,</span><span class="py-param">subtags</span><span class="py-op">)</span><span class="py-op">,</span> <span class="py-param">buffer</span> <span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibFile.preamble-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibFile.preamble-expanded"><span class="lineno">248</span>  <span class="py-line">                <span class="py-docstring">"""Process the given production and it's children"""</span> </span>
<span class="lineno">249</span>  <span class="py-line">                <span class="py-name">the_type</span> <span class="py-op">=</span> <span class="py-name">getString</span><span class="py-op">(</span><span class="py-name">subtags</span><span class="py-op">[</span><span class="py-number">0</span><span class="py-op">]</span><span class="py-op">,</span> <span class="py-name">buffer</span><span class="py-op">)</span> </span>
<span class="lineno">250</span>  <span class="py-line">                <span class="py-name">lineno</span> <span class="py-op">=</span> <span class="py-number">0</span> </span>
<span class="lineno">251</span>  <span class="py-line">                <span class="py-comment">#lineno = lines(0,start,buffer)+1</span> </span>
<span class="lineno">252</span>  <span class="py-line"><span class="py-comment"></span>                <span class="py-keyword">if</span>  <span class="py-name">the_type</span><span class="py-op">.</span><span class="py-name">upper</span><span class="py-op">(</span><span class="py-op">)</span> <span class="py-op">!=</span> <span class="py-string">'PREAMBLE'</span> <span class="py-op">:</span> </span>
<span class="lineno">253</span>  <span class="py-line">                        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">log</span><span class="py-op">.</span><span class="py-name">append</span><span class="py-op">(</span><span class="py-string">"WARNING: Entry at line %d has preamble syntax but type is %s"</span> <span class="py-op">%</span> <span class="py-op">(</span><span class="py-name">lineno</span><span class="py-op">,</span><span class="py-name">the_type</span><span class="py-op">)</span><span class="py-op">)</span> </span>
<span class="lineno">254</span>  <span class="py-line">                <span class="py-keyword">else</span> <span class="py-op">:</span> </span>
<span class="lineno">255</span>  <span class="py-line">                        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">log</span><span class="py-op">.</span><span class="py-name">append</span><span class="py-op">(</span><span class="py-string">"Preamble entry on line %d:"</span> <span class="py-op">%</span> <span class="py-name">lineno</span><span class="py-op">)</span> </span>
<span class="lineno">256</span>  <span class="py-line">                        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">log</span><span class="py-op">.</span><span class="py-name">append</span><span class="py-op">(</span><span class="py-name">buffer</span><span class="py-op">[</span><span class="py-name">start</span><span class="py-op">:</span><span class="py-name">stop</span><span class="py-op">]</span><span class="py-op">)</span> </span>
</div><span class="lineno">257</span>  <span class="py-line"> </span>
<a name="BibFile.comment_entry"></a><div id="BibFile.comment_entry-def"><span class="lineno">258</span> <a class="pysrc-toggle" href="#" id="BibFile.comment_entry-toggle" onclick="toggle('BibFile.comment_entry'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibFile-class.html#comment_entry">comment_entry</a><span class="py-op">(</span> <span class="py-param">self</span><span class="py-op">,</span> <span class="py-op">(</span><span class="py-param">tag</span><span class="py-op">,</span><span class="py-param">start</span><span class="py-op">,</span><span class="py-param">stop</span><span class="py-op">,</span><span class="py-param">subtags</span><span class="py-op">)</span><span class="py-op">,</span> <span class="py-param">buffer</span> <span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="BibFile.comment_entry-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibFile.comment_entry-expanded"><span class="lineno">259</span>  <span class="py-line">                <span class="py-docstring">"""Process the given production and it's children"""</span> </span>
<span class="lineno">260</span>  <span class="py-line">                <span class="py-name">the_type</span> <span class="py-op">=</span> <span class="py-name">getString</span><span class="py-op">(</span><span class="py-name">subtags</span><span class="py-op">[</span><span class="py-number">0</span><span class="py-op">]</span><span class="py-op">,</span> <span class="py-name">buffer</span><span class="py-op">)</span> </span>
<span class="lineno">261</span>  <span class="py-line">                <span class="py-name">lineno</span> <span class="py-op">=</span> <span class="py-number">0</span> </span>
<span class="lineno">262</span>  <span class="py-line">                <span class="py-comment">#lineno = lines(0,start,buffer)+1</span> </span>
<span class="lineno">263</span>  <span class="py-line"><span class="py-comment"></span>                <span class="py-keyword">if</span>  <span class="py-name">the_type</span><span class="py-op">.</span><span class="py-name">upper</span><span class="py-op">(</span><span class="py-op">)</span> <span class="py-op">!=</span> <span class="py-string">'COMMENT'</span> <span class="py-op">:</span> </span>
<span class="lineno">264</span>  <span class="py-line">                        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">log</span><span class="py-op">.</span><span class="py-name">append</span><span class="py-op">(</span><span class="py-string">"WARNING: Entry at line %d has comment syntax but type is %s"</span> <span class="py-op">%</span> <span class="py-op">(</span><span class="py-name">lineno</span><span class="py-op">,</span><span class="py-name">the_type</span><span class="py-op">)</span><span class="py-op">)</span> </span>
<span class="lineno">265</span>  <span class="py-line">                <span class="py-keyword">else</span> <span class="py-op">:</span> </span>
<span class="lineno">266</span>  <span class="py-line">                        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">log</span><span class="py-op">.</span><span class="py-name">append</span><span class="py-op">(</span><span class="py-string">"Comment entry on line %d:"</span> <span class="py-op">%</span> <span class="py-name">lineno</span><span class="py-op">)</span> </span>
<span class="lineno">267</span>  <span class="py-line">                        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">log</span><span class="py-op">.</span><span class="py-name">append</span><span class="py-op">(</span><span class="py-name">buffer</span><span class="py-op">[</span><span class="py-name">start</span><span class="py-op">:</span><span class="py-name">stop</span><span class="py-op">]</span><span class="py-op">)</span> </span>
</div><span class="lineno">268</span>  <span class="py-line"> </span>
<a name="BibFile.find"></a><div id="BibFile.find-def"><span class="lineno">269</span> <a class="pysrc-toggle" href="#" id="BibFile.find-toggle" onclick="toggle('BibFile.find'); return false;">-</a><span class="py-line">        <span class="py-keyword">def</span> <a class="py-def-name" href="bibstuff.bibfile.BibFile-class.html#find">find</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span> <span class="py-param">s</span><span class="py-op">,</span> <span class="py-param">field</span><span class="py-op">=</span><span class="py-string">''</span><span class="py-op">,</span> <span class="py-param">ignore_case</span> <span class="py-op">=</span> <span class="py-number">1</span><span class="py-op">)</span> <span class="py-op">:</span> </span>
</div><div id="BibFile.find-collapsed" style="display:none;" pad="+++" indent="++++++++++++"></div><div id="BibFile.find-expanded"><span class="lineno">270</span>  <span class="py-line">                <span class="py-docstring">'''Find regex in bib_entry.  If field is omitted,</span> </span>
<span class="lineno">271</span>  <span class="py-line"><span class="py-docstring">                   search is through all fields.'''</span> </span>
<span class="lineno">272</span>  <span class="py-line">                <span class="py-name">ls</span> <span class="py-op">=</span> <span class="py-op">[</span><span class="py-op">]</span> </span>
<span class="lineno">273</span>  <span class="py-line">                <span class="py-keyword">if</span> <span class="py-name">ignore_case</span> <span class="py-op">:</span> </span>
<span class="lineno">274</span>  <span class="py-line">                        <span class="py-name">expr</span> <span class="py-op">=</span> <span class="py-name">re</span><span class="py-op">.</span><span class="py-name">compile</span><span class="py-op">(</span><span class="py-name">s</span><span class="py-op">,</span><span class="py-name">re</span><span class="py-op">.</span><span class="py-name">M</span> <span class="py-op">|</span> <span class="py-name">re</span><span class="py-op">.</span><span class="py-name">I</span><span class="py-op">)</span> </span>
<span class="lineno">275</span>  <span class="py-line">                <span class="py-keyword">else</span> <span class="py-op">:</span> </span>
<span class="lineno">276</span>  <span class="py-line">                        <span class="py-name">expr</span> <span class="py-op">=</span> <span class="py-name">re</span><span class="py-op">.</span><span class="py-name">compile</span><span class="py-op">(</span><span class="py-name">s</span><span class="py-op">,</span><span class="py-name">re</span><span class="py-op">.</span><span class="py-name">M</span><span class="py-op">)</span> </span>
<span class="lineno">277</span>  <span class="py-line">                <span class="py-keyword">for</span> <a title="bibstuff.bibfile.BibFile.entry" class="py-name" href="bibstuff.bibfile.BibFile-class.html#entry">entry</a> <span class="py-keyword">in</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">entries</span> <span class="py-op">:</span> </span>
<span class="lineno">278</span>  <span class="py-line">                        <span class="py-keyword">for</span> <span class="py-name">k</span> <span class="py-keyword">in</span> <a title="bibstuff.bibfile.BibFile.entry" class="py-name" href="bibstuff.bibfile.BibFile-class.html#entry">entry</a><span class="py-op">.</span><a title="bibstuff.bibfile.BibEntry.get_fields" class="py-name" href="bibstuff.bibfile.BibEntry-class.html#get_fields">get_fields</a><span class="py-op">(</span><span class="py-op">)</span> <span class="py-op">:</span>  <span class="py-comment">#ai: change from 'fields' to 'get_fields'</span> </span>
<span class="lineno">279</span>  <span class="py-line">                                <span class="py-keyword">if</span>  <a title="bibstuff.bibfile.BibFile.field" class="py-name" href="bibstuff.bibfile.BibFile-class.html#field">field</a> <span class="py-op">==</span> <span class="py-string">''</span> <span class="py-keyword">or</span> <a title="bibstuff.bibfile.BibFile.field" class="py-name" href="bibstuff.bibfile.BibFile-class.html#field">field</a> <span class="py-op">==</span> <span class="py-name">k</span> <span class="py-op">:</span>    </span>
<span class="lineno">280</span>  <span class="py-line">                                        <span class="py-keyword">if</span> <span class="py-name">re</span><span class="py-op">.</span><span class="py-name">search</span><span class="py-op">(</span> <span class="py-name">expr</span><span class="py-op">,</span> <a title="bibstuff.bibfile.BibFile.entry" class="py-name" href="bibstuff.bibfile.BibFile-class.html#entry">entry</a><span class="py-op">[</span><span class="py-name">k</span><span class="py-op">]</span> <span class="py-op">)</span> <span class="py-op">:</span> </span>
<span class="lineno">281</span>  <span class="py-line">                                                <span class="py-name">ls</span><span class="py-op">.</span><span class="py-name">append</span><span class="py-op">(</span> <a title="bibstuff.bibfile.BibFile.entry" class="py-name" href="bibstuff.bibfile.BibFile-class.html#entry">entry</a> <span class="py-op">)</span> </span>
<span class="lineno">282</span>  <span class="py-line">                                                <span class="py-keyword">break</span> <span class="py-comment"># no need to check more fields</span> </span>
<span class="lineno">283</span>  <span class="py-line">                <span class="py-keyword">return</span> <span class="py-name">ls</span> </span>
</div></div><span class="lineno">284</span>  <span class="py-line"> </span>
<span class="lineno">285</span>  <span class="py-line"> </span>
<span class="lineno">286</span>  <span class="py-line"><span class="py-comment"># self test</span> </span>
<span class="lineno">287</span>  <span class="py-line"><span class="py-comment"></span><span class="py-comment"># -------------------------</span> </span>
<span class="lineno">288</span>  <span class="py-line"><span class="py-comment"></span><span class="py-comment"># usage: bibfile.py DATABASE_FILE</span> </span>
<span class="lineno">289</span>  <span class="py-line"><span class="py-comment"></span><span class="py-keyword">if</span> <span class="py-name">__name__</span> <span class="py-op">==</span> <span class="py-string">"__main__"</span><span class="py-op">:</span> </span>
<span class="lineno">290</span>  <span class="py-line">        <span class="py-keyword">import</span> <span class="py-name">sys</span> </span>
<span class="lineno">291</span>  <span class="py-line">        <span class="py-keyword">if</span> <span class="py-name">len</span><span class="py-op">(</span><span class="py-name">sys</span><span class="py-op">.</span><span class="py-name">argv</span><span class="py-op">)</span> <span class="py-op">&gt;</span> <span class="py-number">1</span> <span class="py-op">:</span> </span>
<span class="lineno">292</span>  <span class="py-line">                <span id="link-30" class="py-name"><a title="bibstuff.bibfile.src
bibstuff.bibgrammar.src
bibstuff.bibname.src
bibstuff.bibstyle.src
bibstuff.reflist.src" class="py-name" href="#" onclick="doclink('link-30', 'src', 'Variable bibstuff.bibfile.src=bibstuff.bibfile-module.html#src,Variable bibstuff.bibgrammar.src=bibstuff.bibgrammar-module.html#src,Variable bibstuff.bibname.src=bibstuff.bibname-module.html#src,Variable bibstuff.bibstyle.src=bibstuff.bibstyle-module.html#src,Variable bibstuff.reflist.src=bibstuff.reflist-module.html#src'); return false;">src</a></span></span> <span class="py-op">=</span> <span class="py-name">open</span><span class="py-op">(</span><span class="py-name">sys</span><span class="py-op">.</span><span class="py-name">argv</span><span class="py-op">[</span><span class="py-number">1</span><span class="py-op">]</span><span class="py-op">)</span><span class="py-op">.</span><span class="py-name">read</span><span class="py-op">(</span><span class="py-op">)</span> </span>
<span class="lineno">293</span>  <span class="py-line">                <span id="link-31" class="py-name"><a title="bibstuff.bibfile.bfile
bibstuff.bibname.bfile
bibstuff.bibstyle.bfile" class="py-name" href="#" onclick="doclink('link-31', 'bfile', 'Variable bibstuff.bibfile.bfile=bibstuff.bibfile-module.html#bfile,Variable bibstuff.bibname.bfile=bibstuff.bibname-module.html#bfile,Variable bibstuff.bibstyle.bfile=bibstuff.bibstyle-module.html#bfile'); return false;">bfile</a></span></span> <span class="py-op">=</span> <a title="bibstuff.bibfile.BibFile" class="py-name" href="bibstuff.bibfile.BibFile-class.html">BibFile</a><span class="py-op">(</span><span class="py-op">)</span> </span>
<span class="lineno">294</span>  <span class="py-line">                <a title="bibstuff.bibgrammar" class="py-name" href="bibstuff.bibgrammar-module.html">bibgrammar</a><span class="py-op">.</span><span id="link-32" class="py-name"><a title="bibstuff.addrefs.Parse
bibstuff.bibgrammar.Parse" class="py-name" href="#" onclick="doclink('link-32', 'Parse', 'Function bibstuff.addrefs.Parse()=bibstuff.addrefs-module.html#Parse,Function bibstuff.bibgrammar.Parse()=bibstuff.bibgrammar-module.html#Parse'); return false;">Parse</a></span></span><span class="py-op">(</span><span id="link-33" class="py-name"><a title="bibstuff.bibfile.src
bibstuff.bibgrammar.src
bibstuff.bibname.src
bibstuff.bibstyle.src
bibstuff.reflist.src" class="py-name" href="#" onclick="doclink('link-33', 'src', 'Variable bibstuff.bibfile.src=bibstuff.bibfile-module.html#src,Variable bibstuff.bibgrammar.src=bibstuff.bibgrammar-module.html#src,Variable bibstuff.bibname.src=bibstuff.bibname-module.html#src,Variable bibstuff.bibstyle.src=bibstuff.bibstyle-module.html#src,Variable bibstuff.reflist.src=bibstuff.reflist-module.html#src'); return false;">src</a></span></span><span class="py-op">,</span> <span id="link-34" class="py-name"><a title="bibstuff.bibfile.bfile
bibstuff.bibname.bfile
bibstuff.bibstyle.bfile" class="py-name" href="#" onclick="doclink('link-34', 'bfile', 'Variable bibstuff.bibfile.bfile=bibstuff.bibfile-module.html#bfile,Variable bibstuff.bibname.bfile=bibstuff.bibname-module.html#bfile,Variable bibstuff.bibstyle.bfile=bibstuff.bibstyle-module.html#bfile'); return false;">bfile</a></span></span><span class="py-op">)</span> </span>
<span class="lineno">295</span>  <span class="py-line">                <span class="py-keyword">for</span> <a title="bibstuff.bibfile.BibFile.entry" class="py-name" href="bibstuff.bibfile.BibFile-class.html#entry">entry</a> <span class="py-keyword">in</span> <span id="link-35" class="py-name"><a title="bibstuff.bibfile.bfile
bibstuff.bibname.bfile
bibstuff.bibstyle.bfile" class="py-name" href="#" onclick="doclink('link-35', 'bfile', 'Variable bibstuff.bibfile.bfile=bibstuff.bibfile-module.html#bfile,Variable bibstuff.bibname.bfile=bibstuff.bibname-module.html#bfile,Variable bibstuff.bibstyle.bfile=bibstuff.bibstyle-module.html#bfile'); return false;">bfile</a></span></span><span class="py-op">.</span><span class="py-name">entries</span> <span class="py-op">:</span> </span>
<span class="lineno">296</span>  <span class="py-line">                        <span class="py-keyword">print</span> <a title="bibstuff.bibfile.BibFile.entry" class="py-name" href="bibstuff.bibfile.BibFile-class.html#entry">entry</a> </span>
<span class="lineno">297</span>  <span class="py-line"> </span>
<span class="lineno">298</span>  <span class="py-line">                <span class="py-keyword">print</span> <span class="py-string">"bibfile.log :"</span> </span>
<span class="lineno">299</span>  <span class="py-line">                <span class="py-keyword">for</span> <span class="py-name">i</span><span class="py-op">,</span><span class="py-name">line</span> <span class="py-keyword">in</span> <span class="py-name">enumerate</span><span class="py-op">(</span><span id="link-36" class="py-name"><a title="bibstuff.bibfile.bfile
bibstuff.bibname.bfile
bibstuff.bibstyle.bfile" class="py-name" href="#" onclick="doclink('link-36', 'bfile', 'Variable bibstuff.bibfile.bfile=bibstuff.bibfile-module.html#bfile,Variable bibstuff.bibname.bfile=bibstuff.bibname-module.html#bfile,Variable bibstuff.bibstyle.bfile=bibstuff.bibstyle-module.html#bfile'); return false;">bfile</a></span></span><span class="py-op">.</span><span class="py-name">log</span><span class="py-op">)</span><span class="py-op">:</span> </span>
<span class="lineno">300</span>  <span class="py-line">                        <span class="py-keyword">print</span> <span class="py-name">i</span><span class="py-op">,</span><span class="py-name">line</span> </span>
<span class="lineno">301</span>  <span class="py-line"> </span>
<span class="lineno">302</span>  <span class="py-line">        <span class="py-keyword">else</span> <span class="py-op">:</span> </span>
<span class="lineno">303</span>  <span class="py-line">                <span class="py-keyword">print</span> <span class="py-string">"self test usage: bibfile.py DATABASE_FILE"</span> </span>
<span class="lineno">304</span>  <span class="py-line"> </span><script type="text/javascript">
<!--
expandto(location.href);
// -->
</script>
</pre>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar"
        href="bibstuff-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar"
        href="trees.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar"
        href="indices.html">Index</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th class="navbar">&nbsp;&nbsp;&nbsp;<a class="navbar"
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center">
            <p class="nomargin">
              BibStuff
      </p></th></tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">Generated by Epydoc
        3.0alpha2 on Thu Aug 03 00:57:23 2006</td>
    <td align="right" class="footer">
      <a href="http://epydoc.sourceforge.net">http://epydoc.sf.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie()
  // -->
</script>
  
</body>
</html>
